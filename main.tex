% ========== LaTeX 主文件 ==========
% 文档类将由布局配置文件定义，支持三层架构设计

% 首先导入个人配置（包含布局选择）
\input{config}

% 添加条件判断支持
\RequirePackage{ifthen}

% ========== 条件加载布局配置 ==========
% 根据 config.tex 中的 \documentlayout 变量选择对应的布局配置
\ifthenelse{\equal{\documentlayout}{double}}{%
    % 双栏布局配置
    \typeout{Loading double column layout configuration...}
    \input{preamble/layout_double/settings}
}{%
    % 单栏布局配置（默认）
    \typeout{Loading single column layout configuration...}
    \input{preamble/layout_single/settings}
}

\begin{document} 

% ========== 封面页 ==========
\subfile{content/cover} 

% ========== 目录 ==========
\renewcommand{\contentsname}{目录}
\pagenumbering{roman}
\thispagestyle{empty}
% 双列布局下将目录设置为单列并独立成页
\ifthenelse{\equal{\documentlayout}{double}}{%
    \onecolumn
    \tableofcontents
    \clearpage
    \pagenumbering{arabic}
    \twocolumn
}{%
    \tableofcontents
    \newpage
    \pagenumbering{arabic}
}
\hypersetup{linkcolor=red}

% ========== 正文内容 ==========
\subfile{content/chapterD1} 
\subfile{content/chapterD2} 
% \subfile{content/template/template} 
% ...

% ========== 参考文献列表 ==========
% 双列布局下将参考文献设置为单列并独立成页
\ifthenelse{\equal{\documentlayout}{double}}{%
    \balance
    \clearpage
    \onecolumn
    \printbibliography
}{%
    \newpage
    \printbibliography
}

\end{document}