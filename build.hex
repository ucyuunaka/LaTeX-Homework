0000	40 65 63 68 6f 20 6f 66  66 0d 0a 73 65 74 6c 6f   @echo off..setlo
0010	63 61 6c 20 65 6e 61 62  6c 65 64 65 6c 61 79 65   cal enabledelaye
0020	64 65 78 70 61 6e 73 69  6f 6e 0d 0a 0d 0a 73 65   dexpansion....se
0030	74 20 22 66 69 6c 65 6e  61 6d 65 3d 25 7e 31 22   t "filename=%~1"
0040	0d 0a 69 66 20 22 25 66  69 6c 65 6e 61 6d 65 25   ..if "%filename%
0050	22 3d 3d 22 22 20 73 65  74 20 22 66 69 6c 65 6e   "=="" set "filen
0060	61 6d 65 3d 6d 61 69 6e  22 0d 0a 0d 0a 73 65 74   ame=main"....set
0070	20 22 66 69 6c 65 6e 61  6d 65 3d 25 66 69 6c 65    "filename=%file
0080	6e 61 6d 65 3a 2e 74 65  78 3d 25 22 0d 0a 0d 0a   name:.tex=%"....
0090	69 66 20 6e 6f 74 20 65  78 69 73 74 20 62 75 69   if not exist bui
00a0	6c 64 20 6d 6b 64 69 72  20 62 75 69 6c 64 0d 0a   ld mkdir build..
00b0	0d 0a 65 63 68 6f 20 5b  42 75 69 6c 64 5d 20 e5   ..echo [Build] .
00c0	bc 80 e5 a7 8b e6 9e 84  e5 bb ba 20 25 66 69 6c   ........... %fil
00d0	65 6e 61 6d 65 25 2e 74  65 78 20 2e 2e 2e 0d 0a   ename%.tex .....
00e0	6c 61 74 65 78 6d 6b 20  2d 70 64 66 20 2d 78 65   latexmk -pdf -xe
00f0	6c 61 74 65 78 20 2d 73  68 65 6c 6c 2d 65 73 63   latex -shell-esc
0100	61 70 65 20 2d 6f 75 74  64 69 72 3d 62 75 69 6c   ape -outdir=buil
0110	64 20 2d 61 75 78 64 69  72 3d 62 75 69 6c 64 20   d -auxdir=build 
0120	2d 69 6e 74 65 72 61 63  74 69 6f 6e 3d 6e 6f 6e   -interaction=non
0130	73 74 6f 70 6d 6f 64 65  20 2d 73 79 6e 63 74 65   stopmode -syncte
0140	78 3d 31 20 22 25 66 69  6c 65 6e 61 6d 65 25 2e   x=1 "%filename%.
0150	74 65 78 22 0d 0a 0d 0a  69 66 20 65 72 72 6f 72   tex"....if error
0160	6c 65 76 65 6c 20 31 20  28 0d 0a 20 20 20 20 65   level 1 (..    e
0170	63 68 6f 20 5b 42 75 69  6c 64 5d 20 e6 9e 84 e5   cho [Build] ....
0180	bb ba e5 a4 b1 e8 b4 a5  ef bc 8c e9 94 99 e8 af   ................
0190	af e7 a0 81 ef bc 9a 25  65 72 72 6f 72 6c 65 76   .......%errorlev
01a0	65 6c 25 0d 0a 20 20 20  20 65 78 69 74 20 2f 62   el%..    exit /b
01b0	20 25 65 72 72 6f 72 6c  65 76 65 6c 25 0d 0a 29    %errorlevel%..)
01c0	0d 0a 0d 0a 69 66 20 65  78 69 73 74 20 22 62 75   ....if exist "bu
01d0	69 6c 64 5c 25 66 69 6c  65 6e 61 6d 65 25 2e 70   ild\%filename%.p
01e0	64 66 22 20 28 0d 0a 20  20 20 20 63 6f 70 79 20   df" (..    copy 
01f0	22 62 75 69 6c 64 5c 25  66 69 6c 65 6e 61 6d 65   "build\%filename
0200	25 2e 70 64 66 22 20 22  25 66 69 6c 65 6e 61 6d   %.pdf" "%filenam
0210	65 25 2e 70 64 66 22 20  3e 6e 75 6c 0d 0a 20 20   e%.pdf" >nul..  
0220	20 20 69 66 20 65 72 72  6f 72 6c 65 76 65 6c 20     if errorlevel 
0230	31 20 28 0d 0a 20 20 20  20 20 20 20 20 65 63 68   1 (..        ech
0240	6f 20 5b 42 75 69 6c 64  5d 20 50 44 46 20 e5 a4   o [Build] PDF ..
0250	8d e5 88 b6 e5 a4 b1 e8  b4 a5 0d 0a 20 20 20 20   ............    
0260	20 20 20 20 65 78 69 74  20 2f 62 20 31 0d 0a 20       exit /b 1.. 
0270	20 20 20 29 20 65 6c 73  65 20 28 0d 0a 20 20 20      ) else (..   
0280	20 20 20 20 20 65 63 68  6f 20 5b 42 75 69 6c 64        echo [Build
0290	5d 20 e6 9e 84 e5 bb ba  e6 88 90 e5 8a 9f ef bc   ] ..............
02a0	8c 50 44 46 20 e6 96 87  e4 bb b6 e5 90 8d e4 b8   .PDF ...........
02b0	ba ef bc 9a 25 66 69 6c  65 6e 61 6d 65 25 2e 70   ....%filename%.p
02c0	64 66 0d 0a 20 20 20 20  29 0d 0a 29 20 65 6c 73   df..    )..) els
02d0	65 20 28 0d 0a 20 20 20  20 65 63 68 6f 20 5b 42   e (..    echo [B
02e0	75 69 6c 64 5d 20 e6 9e  84 e5 bb ba e5 a4 b1 e8   uild] ..........
02f0	b4 a5 ef bc 8c e6 9c aa  e6 89 be e5 88 b0 20 50   .............. P
0300	44 46 20 e6 96 87 e4 bb  b6 0d 0a 20 20 20 20 65   DF ........    e
0310	78 69 74 20 2f 62 20 31  0d 0a 29                  xit /b 1..)
